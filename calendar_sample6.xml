<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="composeEvent Test" height="40" author="Google"
     author_email="calendar-gadget-questions@google.com">
   <Require feature="google.calendar-0.5" />
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
      <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
      <html>
      <body>

      <script>
      
      function runxml() {
        console.log("hi");


        var url = "https://acmetsp-n.webex.com/WBXService/XMLService";
                                        
        var xml = '<?xml version="1.0" encoding="utf-8"?> <serv:message xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:serv="http://www.webex.com/schemas/2002/06/service" xmlns:schemaLocation="http://www.webex.com/schemas/2002/06/service http://www.webex.com/schemas/2002/06/service/service.xsd"> <header> <securityContext> <webExID>ridhillo</webExID> <password>P@ss1234</password> <siteName>acmetsp-n</siteName> </securityContext> </header> <body> <bodyContent xsi:type="java:com.webex.service.binding.meeting.CreateMeeting"> <accessControl> <meetingPassword>Cisco123</meetingPassword> </accessControl> <metaData> <confName>Test Meeting</confName> <location></location> </metaData> <participants> <attendees> <attendee> <person> <email>johitchc@cisco.com</email> </person> <emailInvitations>TRUE</emailInvitations> </attendee> </attendees> </participants> <schedule> <startDate /> </schedule> <telephony> <telephonySupport>NONE</telephonySupport> </telephony> <attendeeOptions> <emailInvitations>TRUE</emailInvitations> </attendeeOptions> </bodyContent> </body> </serv:message>'


        var url = "https://acmetsp-n.webex.com/WBXService/XMLService";

        function makePOSTRequest(url, postdata) {
          var params = {};
          postdata = gadgets.io.encodeValues(postdata);
          params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.POST;
          gadgets.io.makeRequest(url, response, params); 
        };

        function response(obj) {
          console.log("before request");
          console.log(obj.text);
          console.log("request madeeeee");
        };

        makePOSTRequest(url, xml);
      }               
        

      function compose() {

        var eventData = {
          title: 'Christmas',
          details: 'Merry Christmas to you!',
          location: 'My house',
          allDay: true,

          startTime: {year: 2009, month: 12, date: 25},

          // Within the data model, the end time is EXCLUSIVE. So the endTime MUST
          // be on the day after the start time.
          endTime: {year: 2009, month: 12, date: 26},

          // Note that attendees MUST be sent in contact format.
          attendees: [
            {email: 'davem.gadgets@gmail.com'}
          ],

      // For more RRULE examples, please see http://www.ietf.org/rfc/rfc2445.txt
          rrule: 'RRULE:FREQ=YEARLY'
        };
        google.calendar.composeEvent(eventData);
      }
      </script>

      <center>
      <button onclick="runxml()">Compose Event</button>
      </center>

      </body>
      </html>
    ]]>
  </Content>
</Module>
